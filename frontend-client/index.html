<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 禁用缓存 -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>高校职业推荐系统</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- 全局调试助手 -->
    <script>
      // 路由调试助手
      window.__routeDebug = {
        log: function(message, data) {
          console.log('[路由调试] ' + message, data || '');
        },
        // 强制刷新页面
        forceRefresh: function(path) {
          if (window.location.pathname === path) {
            console.log('强制刷新页面:', path);
            window.location.href = path + '?_t=' + Date.now();
          }
        }
      };
      
      // 监听路由变化
      window.addEventListener('popstate', function(event) {
        window.__routeDebug.log('路由变化 (popstate)', window.location.pathname);
      });
    </script>
    <script>
      // 全局导航帮助函数
      window.appNavigation = {
        // 直接跳转到职业库函数
        goToCareerLibrary: function() {
          console.log("正在直接导航到职业库...");
          
          try {
            // 尝试使用路由对象
            if (window.__vueRouter) {
              window.__vueRouter.push({
                path: '/career-library',
                query: { _t: Date.now().toString() },
              });
              return;
            }
          } catch (e) {
            console.error("路由导航失败:", e);
          }
          
          // 备用方法：直接修改location
          window.location.href = '/career-library';
        },
        
        // 重新加载当前页面
        reloadCurrentPage: function() {
          window.location.reload();
        }
      };
      
      // 监听路由变化
      window.addEventListener('popstate', function(event) {
        console.log('检测到路由变化:', {
          pathname: window.location.pathname,
          search: window.location.search,
          state: event.state
        });
      });
    </script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
